* 8장 벡터공간의 기하학
** 8.1 아핀결합(Affine Combinations)
   아핀결합은 선형결합 중에서 계수의 합이 1로 제약되는 결합을 말한다.

   #+BEGIN_QUOTE
   집합S에 속하는 점들의 모든 아핀결합의 집합을 S의 *아핀공간(affine hull or affine span)*
   이라 부르고, aff S 로 표기한다.
   #+END_QUOTE
   
   하나의 점의 아핀공간은 그 한 점으로 된 집합인데, 
   하나의 계수와 하나의 점의 곱의 형태로 나타내어 지며 계수는 1이어야 한다.
   두개의 점의 아핀공간은 위의 형태 두 개가 결합된 형태로 계수합이 1이어야 한다.
   계수의 합이 1이어야 한다는 조건을 이용하면 계수인 두 개의 미지수를
   하나의 미지수로 줄일 수 있다. 하나의 계수를 t라고 하면 다른 하나는 1-t다.
   이것을 식으로 나타내면 아래와 같다.

     \[ y = (1-t)v_{1} + tv_{2}, with t in R \]
   
   위 집합에는 계수가 0, 1인 경우도 포함된다.  
   위 식을 풀어 아래처럼 정리하면 다른 특징이 발견된다.

     \[ y = v_{1} - tv_{1} + tv_{2} = v_{1} + t(v_{2}-v_{1}) = p + tu \]

   v_{1} = v_{2} 인 경우 하나의 점, v_{1} = v_{2} = p 라는 점만 남는다.
   위 식은 u가 만드는 공간을 p만큼 평행이동시킨다. 
   즉 아핀결합 aff{v_{1}, v_{2}}는 선형결합 v_{2}-v{1}을 v_{1}만큼 이동시킨 것과 같다.
   이 관계를 반대로 바라보면 아핀결합을 v_{1}만큼 후퇴시키면 즉 y-v_{1}는 선형결합이 된다. 
   이러한 아핀결합과 선형결합의 관계를 일반화하여 3개 이상의 경우까지 확장하면 아래처럼 정의된다.

   #+BEGIN_QUOTE
   정리1. 아핀결합과 선형결합의 관계

   R^{n}에 속하는 v_{1}, ... , v_{p} 가 있을 때 이것들의 R^{n}에 속하는 아핀결합 y가
   존재하려면 y-v_{1}가 반드시 아핀결합의 각 성분들에서 v_{1}을 빼준 것들로 만든 선형결합이
   되어야 한다. 이는 필요충분조건이다.
   #+END_QUOTE

   필요충분조건으로 후자인 전제조건 y-v_{1} 이 전자인 결론 y 로 유도되나 확인하고
   y가 y-v_{1} 으로 유도되는지 모두 확인하면 된다.
   계수합이 1이라는 아핀결합의 제약조건이 핵심적으로 적용된다.
   
   이 정리를 적용할 수 있는 문제들
   1. 선형결합성분들과 몇 개의 아핀결합이 주어졌을 때 선형성분들로 각 아핀결합이 만들어지는지 확인할 수 있다.
   2. 반대로 아핀결합성분들로 선형결합이 만들어지는지도 확인할 수 있을 것이다.
    
   책에는 1번 케이스를 푸는 2가지 방법을 소개한다.
   하나는 선형성분이 기저가 아닐 때 기약행렬을 만들어 구하는 방법이고 
   다른 하나는 선형성분이 기저일 때 기약행렬을 만들어 구하는 방법이다.
   전자는 y-v_{1}형식을 이용하여 선형성분과 선형결합 모두에 v_{1}을 차감한 것을 순서대로 
   배치하여 행렬로 구성한 뒤에 기약행렬을 구한다. 기약행렬 결과가 해가 있는 것으로 나오면
   v_{1}을 차감한 두번째 성분에 대한 계수부터 구할 수 있다. 자유변수가 있다면 매개변수 벡터형식으로
   변환하여 구한다. 자유변수는 모든 수가 가능하므로 임의값을 대입하면 나머지 계수를 구할 수 있다.
   그 뒤 y-v_{1}을 y로 바꿔 계수합을 구해보면 선형성분들로 아핀결합이 구성되나 알 수 있다.

   선형성분이 모두 기저라면 아핀결합은 고유한 선형결합이다. 물론 계수들의 합이 1일 때에 한한다.
   여기의 계수들은 기저좌표에서의 한 점의 좌표가 되는데 이 점이 바로 아핀결합이 되는 것이다.
   따라서 기저인 선형성분들과 주어진 아핀결합을 계수행렬로 구성하여 기약하면
   기약된 아핀결합의 각 성분은 즉시 기저좌표가 된다. 즉 막바로 기저들의 계수가 된다.
   따라서 각 열의 성분의 합이 1이면 선형성분으로 만들어지는 아핀결합인지 바로 확인가능하다.

   선형성분이 비기저이면 아핀결합이 곧 선형결합은 아니다. 변환이 필요하다. 
   선형성분이 기저이면서 계수합이 1이면 곧 아핀결합이다.
   
   #+BEGIN_QUOTE
   정의. 아핀집합의 조건 

   S에 속하는 p,q가 있고 t가 실수인 경우에 (1-t)p+tq 역시 S의 원소라면 
   집합 S는 아핀집합이다.
   #+END_QUOTE

   위의 정의를 기하학적으로 바꿔 생각해보면
   어떤 집합에 속하는 두 개의 점이 있을 때, 그 점들을 지나는 선 전체가 그 집합에 속하면
   그 집합은 아핀집합이다. 만약 집합에 한 점밖에 없다면 그 점과 그 점을 지나는 선은 한 점이다.

   S가 수 많은 원소를 가져도 그 중 두 원소로 된 아핀결합은 모두 S의 원소가 되어야 한다.
   단지 두 원소에 한정 되지 않고, 임의의 개수로 만든 아핀결합 모두가 S의 원소가 되야 한다.
   이러한 사실로 부터 아래 정리2가 도출된다.

   #+BEGIN_QUOTE
   정리2. 집합S는 그 구성성분들의 모든 아핀결합이 전부 S에 속하는 것을 필요충분조건으로 아핀집합이 된다.
   즉, S 자체가 아핀공간인 것을 필요충분조건으로(S = aff S) S는 아핀집합이다.
   #+END_QUOTE

   집합의 구성성분이 한 두 개일 때는 확인이 쉽다. 많은 경우는 어떻게 확인할까?
   많은 성분들의 결합을 두 개의 성분들의 결합으로 변형시키는 것이다.
   어떻게? 계수합이 1이라는 얘기는 1에서 어떤 계수를 빼도 절대 0이 되지 않는다는 의미다. 
   빼는 계수를 편의상 t라고 하면 그것을 제외한 나머지를 t로 나누면서 t로 묶을 수 있다.
   이렇게 되면 뺀 성분과 t로 묶인 성분 두 개의 합으로 변형된다. 이 때도 두 성분의 계수합이 1이다.
   즉 여전히 아핀결합이다. 그렇다면 t로 묶인 성분 역시 집합의 구성성분이다. 이 과정을 다시 t로 묶인 성분
   에 귀납적으로 적용해보면 동일한 결론에 이른다. 그럼으로써 그런 점들의 모든 아핀결합이 집합에 속한다는 것을
   확인하게 된다. 즉 S의 아핀공간은 S에 속하고 반대로 S 역시 S의 아핀공간에 속한다.
   따라서 S가 아핀집합이어야 S가 곧 S의 아핀공간이며, 반대로 S가 곧 아핀공간일 때
   S의 두 개 이상의 점들의 아핀결합이 다시 S에 있게 되므로 S 스스로가 아핀집합이다.

   #+BEGIN_QUOTE
   정의. 아핀집합과 부분공간의 밀접한 관계를 강조하는 아핀집합 용어들.

   R^{n}의 집합 S가 벡터 p 만큼 평행이동한 것을 다음과 같이 표현할 수 있다.

      \[ S+p = \{s+p:s \in S \} \]

   플랫(*flat*)은 부분공간의 평행이동이다.
   두 플랫은 하나가 다른 하나의 평행이동인 경우 *평행* 하다.
   플랫의 차원(*dimension of a flat*)은 상응하는 평행 부분공간의 차원이다.
   집합 S의 차원(*dimension of a set S*)은 S를 포함하는 가장 작은 플랫의 차원이다.
   (dim S로 표기한다.)
   R^{n}의 선은 차원 1의 플랫이다. 
   R^{n}의 초평면(*hyperplane*)은 n-1차원의 플랫이다.
   #+END_QUOTE
   
   3차원 실수공간에서 적합한 부분공간은 원점 0, 그것을 지나는 모든 선의 집합, 그것을 지나는 모든 면의 집합
   으로 구성된다. 그러므로 3차원 실수공간에서 적합한 플랫은 점들(0차원), 선들(1차원), 면들(2차원)이며
   이것들은 원점을 지날 수도 지나지 않을 수도 있다.

   #+BEGIN_QUOTE
   정리3. 아핀집합과 플랫과의 관계

   비어 있지 않은 집합 S는 그것이 플랫인 것을 필요충분조건으로 아핀이다.
   #+END_QUOTE

   정리3은 아핀공간을 기하학적으로 바라보는 방법을 제공한다.
   그 집합에 있는 점들의 모든 아핀결합으로 구성된 것이 플랫이다.
   예를들면 특정 기저로 만든 모든 선형결합의 집합이 3차원 실수공간이더라도
   아핀공간은 그 기저들을 지나는 평면일 뿐이다.
   
   비동차계 해집합과 동차계 해집합과의 관계를 예전에 다루었는데
   후자의 해집합이 평행이동한 것이 전자의 해집합이었다.
   이 관계를 이용하여 비동차계 해집합이 아핀집합인 경우를 구할 수 있다.

   다음 정리는 R^{2}, R^{3}에서 컴퓨터 그래픽 응용에 밀접하게 연관되는
   아핀결합의 다른 관점을 제공한다.

   #+BEGIN_QUOTE
   정의. 벡터의 동차형식 

   R^{n}에 속하는 v에 대하여 v의 표준 *동차형식* 은 R^{n+1}에 속하는 점
   \[ \tilde{v}=\begin{bmatrix}v\\1\end{bmatrix} \] 이다.
   #+END_QUOTE

   #+BEGIN_QUOTE
   정리4. 동차형식과 아핀결합의 필요충분관계

   R^{n}의 점y는 y의 동차형식이 Span{\tilde{v}_{1},...,\tilde{v}_{p}}
   에 있는 것을 필요충분조건으로 v_{1},...,v_{p}의 아핀결합이다.
 
   \tilde{y}=c_{1}\tilde{v}_{1}+ \cdots + c_{p}\tilde{v}_{p}인 것을
   필요충분조건으로 계수합이 1인 y=c_{1}v_{1}+ \cdots + c_{p}v_{p}이 된다.
   #+END_QUOTE

   예제4의 그림에서 아핀공간을 덮고 있는 p를 지나는 삼각 영역에 대한 설명이 없다.
